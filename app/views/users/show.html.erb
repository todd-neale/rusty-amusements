<div class="container mt-5">
  <div class="profile-info">
    <% profile_picture = @user.photo.attached? ? @user.photo.key : "gurn1_s3il5m" %>
    <%= cl_image_tag(profile_picture, width: 150, height: 150, crop: :fill, style: "border-radius: 5px") %>
    <div class="name-and-edit">
      <h1><%= @user.name %></h1>
      <%= link_to "Update my profile", edit_user_registration_path, class: "btn btn-outline-info btn-sm" %>
    </div>
    <div class="email-and-rank">
      <p><%= @user.email %></p>
      <p> <strong>Rank:</strong> Carny </p>
    </div>
  </div>

  <HR>

  <% unless @owned_amusements.empty? %>
    <h2>Amusements what I own</h2>
    <% @owned_amusements.each do |amusement| %>
      <%= link_to amusement_path(amusement) do %>
        <div class="card-product my-3">
          <%= cl_image_tag amusement.photos.first.key, alt: "rust" %>
          <div class="card-product-infos">
            <h2><%= amusement.name %></h2>
            <p><span><%= amusement.tagline %></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span><%= link_to "Edit", edit_amusement_path(amusement), class: "btn btn-outline-secondary btn-sm" %></span></p>
          </div>
        </div>
      <% end %>
    <% end %>
    <HR>
  <% end %>

  <% unless @bookings.empty? %>
    <h2>Bookings what are coming up</h2>
    <% @bookings.each do |booking| %>
      <div class="card-product my-3">
        <%= cl_image_tag booking.amusement.photos.first.key, alt: "rust" %>
        <div class="card-product-infos">
          <h2><%= booking.amusement.name %></h2>
          <p><%= booking.start_date.to_formatted_s(:long_ordinal) %> to <%= booking.end_date.to_formatted_s(:long_ordinal) %></p>
          <p><%= booking.status %></p>
          <%= render 'booking_status_buttons', booking: booking %>
        </div>
      </div>
    <% end %>
    <HR>
  <% end %>

  <% unless @lettings.empty? %>
    <h2>Amusements what people want from me</h2>
    <% @lettings.each do |letting| %>
      <div class="card-product my-3">
        <%= cl_image_tag letting.amusement.photos.first.key, alt: "rust" %>
        <div class="card-product-infos">
          <h2><%= letting.amusement.name %></h2>
          <p><%= letting.start_date.to_formatted_s(:long_ordinal) %> to <%= letting.end_date.to_formatted_s(:long_ordinal)  %></p>
          <p><span><%= letting.status %></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span><%= render 'letting_status_buttons', letting: letting %></span></p>
        </div>
      </div>
    <% end %>
  <% end %>

</div>

